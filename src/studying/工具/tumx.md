# tmux

tmux是一款优秀的终端复用软件

优点

* 丝滑分屏（split）：分屏操作会默认进入当前路径保持ssh连接；
* 保护现场(attach)：关闭tmux，命令依旧执行。对于ssh远程连接而言，即使网络不稳定也没有关系，掉线后重新连接，可以直奔现场，之前运行中的任务，依旧在跑，就好像从来没有离开过一样。
* 会话共享

安装

```shell
sudo apt-get install tmux
```

基本概念

 `session`（会话）

`window`（窗口）

`pane`（面板

一个tmux `session`（会话）可以包含多个`window`（窗口），窗口默认充满会话界面，因此这些窗口中可以运行相关性不大的任务。

一个`window`又可以包含多个`pane`（面板），窗口下的面板，都处于同一界面下，这些面板适合运行相关性高的任务，以便同时观察到它们的运行情况。



```shell
# 新建一个名称为demo的会话
tmux new -s demo
# 断开当前会话，会话在后台运行
tmux detach
# 快捷键: Ctrl+b + d
```

进入会话

```shell
# 默认进入第一个会话
tmux a
# 进入到名称为demo的会话
tmux a -t demo 
```

关闭会话

```shell
 # 关闭demo会话
tmux kill-session -t demo
# 关闭服务器，所有的会话都将关闭
tmux kill-server 
```

查看会话

```shell
# 查看所有会话
tmux ls 
# 快捷键: trl+b + s
```

## 快捷键

系统命令

|   前缀   |   指令   |            描述            |
| :------: | :------: | :------------------------: |
| `Ctrl+b` |   `?`    |     显示快捷键帮助文档     |
| `Ctrl+b` |   `d`    |        断开当前会话        |
| `Ctrl+b` |   `D`    |      选择要断开的会话      |
| `Ctrl+b` | `Ctrl+z` |        挂起当前会话        |
| `Ctrl+b` |   `r`    |      强制重载当前会话      |
| `Ctrl+b` |   `s`    | 显示会话列表用于选择并切换 |

窗口命令

|   前缀   | 指令  |                    描述                    |
| :------: | :---: | :----------------------------------------: |
| `Ctrl+b` |  `c`  |                  新建窗口                  |
| `Ctrl+b` |  `&`  | 关闭当前窗口（关闭前需输入`y` or `n`确认） |
| `Ctrl+b` | `0~9` |               切换到指定窗口               |
| `Ctrl+b` |  `p`  |               切换到上一窗口               |
| `Ctrl+b` |  `n`  |               切换到下一窗口               |
| `Ctrl+b` |  `w`  |        打开窗口列表，用于且切换窗口        |
| `Ctrl+b` |  `,`  |               重命名当前窗口               |
| `Ctrl+b` |  `.`  |   修改当前窗口编号（适用于窗口重新排序）   |
| `Ctrl+b` |  `f`  |  快速定位到窗口（输入关键字匹配窗口名称）  |

面板命令

|   前缀   |     指令      |                             描述                             |
| :------: | :-----------: | :----------------------------------------------------------: |
| `Ctrl+b` |      `"`      |              当前面板上下一分为二，下侧新建面板              |
| `Ctrl+b` |      `%`      |              当前面板左右一分为二，右侧新建面板              |
| `Ctrl+b` |      `x`      |          关闭当前面板（关闭前需输入`y` or `n`确认）          |
| `Ctrl+b` |      `z`      |   最大化当前面板，再重复一次按键后恢复正常（v1.8版本新增）   |
| `Ctrl+b` |      `!`      | 将当前面板移动到新的窗口打开（原窗口中存在两个及以上面板有效） |
| `Ctrl+b` |      `;`      |                   切换到最后一次使用的面板                   |
| `Ctrl+b` |      `q`      |  显示面板编号，在编号消失前输入对应的数字可切换到相应的面板  |
| `Ctrl+b` | `Alt+方向键`  |              以5个单元格为单位调整当前面板边缘               |
| `Ctrl+b` | `Ctrl+方向键` |  以1个单元格为单位调整当前面板边缘（Mac下被系统快捷键覆盖）  |
| `Ctrl+b` |      `t`      |                           显示时钟                           |